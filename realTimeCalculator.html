<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Alpha Calculator</title>
</head>
<style>
.calculator{
  position:relative;
  width:400px;
  height:auto;
  border:3px solid rgb(7, 110, 179);
  border-radius: 5px;
  padding: 6px;
  margin: 15px auto; 
  background: #f8f9fa;
}
.powerBtn{
  padding: 8px 16px;
  font-size: 24px;
  border: none;
  cursor: pointer;
}

.off {
  background-color: rgb(122, 8, 8);
  color: white;
}
.off:hover {
  background-color: rgb(201, 4, 4);
  color: white;
}
.on {
  background-color: rgb(34, 136, 34);
  color: white;
}
.on:hover {
  background-color: rgb(9, 190, 9);
  color: white;
}
button {
  width: 30%;
  height: 70px;
  border: none;
  margin:1px;
  background: #e3e3e3;
  font-weight: bold;
  border-radius: 2px;
  cursor: pointer;
  transition:  background 0.2s ease-in-out;
}
button:hover {
  background: #ccc;
}
.screen {
  width: 85%;
  height: 50px;
  margin-bottom: 5px;
  background:white;
  text-align: right;
  padding: 15px;
  font-size: 40px;
  border:3px solid rgb(4, 58, 139);
  border-radius: 5px;
  overflow-x: auto;
}
.preview {
  width: 88%;
  height: 30px;
  background: #eef3f7;
  text-align: right;
  padding: 10px;
  font-size: 24px;
  border: 2px solid rgb(7,110,179);
  border-radius: 5px;
  color: gray;
  margin-bottom: 10px;
}
.num, .operator, .evaluate, .clear2, .delete {
  font-size: 25px;
}
</style>

<body>
  <div class="calculator">
    <div class="screen" id="screen">0</div>
    <div class="preview" id="preview">0</div>
    <div class="function">
      <button id="powerBtn" onclick="togglePower()" class="off">OFF</button>
    </div>

    <div class="first">
      <button class="num" onclick="appendNumber('1')">1</button>
      <button class="num" onclick="appendNumber('2')">2</button>
      <button class="num" onclick="appendNumber('3')">3</button>
    </div>
    <div class="second">
      <button class="num" onclick="appendNumber('4')">4</button>
      <button class="num" onclick="appendNumber('5')">5</button>
      <button class="num" onclick="appendNumber('6')">6</button>
    </div>
    <div class="third">
      <button class="num" onclick="appendNumber('7')">7</button>
      <button class="num" onclick="appendNumber('8')">8</button>
      <button class="num" onclick="appendNumber('9')">9</button>
    </div>
    <div class="four">
      <button class="num" onclick="appendNumber('0')">0</button>
      <button class="num" onclick="appendNumber('.')">.</button>
      <button class="operator" onclick="appendOperator('-')">-</button>
    </div>
    <div class="five">
      <button class="operator" onclick="appendOperator('+')">+</button>
      <button class="operator" onclick="appendOperator('*')">*</button>
      <button class="evaluate" onclick="calculate()">=</button>
    </div>
    <div class="six">
      <button class="operator" onclick="appendOperator('/')">/</button>
      <button class="clear2" onclick="clearScreen()">C</button>
      <button class="delete" onclick="deleteChar()">DEL</button>
    </div>
  </div>

  <script>
    const powerBtn = document.getElementById('powerBtn');
    const screen = document.getElementById("screen");
    const preview = document.getElementById("preview");
    let isOn = true;

    powerBtn.addEventListener('click', function() {
      if (powerBtn.classList.contains('off')) {
        powerBtn.classList.remove('off');
        powerBtn.classList.add('on');
        powerBtn.textContent = 'ON';
      } else {
        powerBtn.classList.remove('on');
        powerBtn.classList.add('off');
        powerBtn.textContent = 'OFF';
      }
    });

    function togglePower() {
      isOn = !isOn;
      screen.textContent = isOn ? "0" : "";
      preview.textContent = isOn ? "0" : "";
    }

    function clearScreen() {
      if (!isOn) return;
      screen.textContent = "0";
      preview.textContent = "0";
    }

    function deleteChar() {
      if (!isOn) return;
      let str = screen.textContent;
      screen.textContent = str.slice(0, -1) || "0";
      updatePreview();
    }

    function appendNumber(num) {
      if (!isOn) return;
      if (screen.textContent === "0" || screen.textContent === "Error") {
        screen.textContent = num;
      } else {
        screen.textContent += num;
      }
      updatePreview();
    }

    function appendOperator(operator) {
      if (!isOn) return;
      let lastChar = screen.textContent.slice(-1);
      if (!["+","-","*","/"].includes(lastChar)) {
        screen.textContent += operator;
      }
      updatePreview();
    }

    function calculate() {
      if (!isOn) return;
      try {
        let result = eval(screen.textContent);
        screen.textContent = result;
        preview.textContent = result;
      } catch (error) {
        screen.textContent = "Error";
        preview.textContent = "Error";
      }
    }

    //Real-time live preview update
    function updatePreview() {
      if (!isOn) return;
      try {
        let value = screen.textContent;
        if (value && !["+","-","*","/"].includes(value.slice(-1))) {
          let result = eval(value);
          if (!isNaN(result)) {
            preview.textContent = result;
          }
        }
      } catch {
        preview.textContent = "";
      }
    }

    // Keyboard Support
    document.addEventListener("keydown", function(event) {
      if (!isOn) return;
      const key = event.key;

      if (!isNaN(key) || key === ".") {
        appendNumber(key);
      } else if (["+", "-", "*", "/"].includes(key)) {
        appendOperator(key);
      } else if (key === "Enter" || key === "=") {
        calculate();
      } else if (key === "Backspace") {
        deleteChar();
      } else if (key === "Escape" || key.toLowerCase() === "c") {
        clearScreen();
      }
    });
  </script>
</body>
</html>
